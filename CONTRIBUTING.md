# Contributing to torq

**\o/ -o- \o/** Thanks for considering to contribute to torq **\o/ -o- \o/**

You already discovered our code repository hosted in the [LN.capital Organization](https://github.com/lncapital) on GitHub. The described guidelines are not set in stone. As the project grows so will this document. Feel free to propose changes to this document by opening a pull request

## How Can I Contribute?

### Reporting Bugs
**Note:** If you find a **Closed** issue that seems like it is the same thing that you're experiencing, open a new issue and include a link to the original issue in the body of your new one.

### Suggesting Enhancements
Let us know what you are missing so we can improve the software for everybody!

### Your First Code Contribution
Unsure where to begin contributing to Atom? You can start by looking through these `Good first issue` and `Help wanted` issues:

* [Good first issue][good first issue] - issues which should only require a few lines of code, and a test or two.
* [Help wanted issues][help wanted] - issues which should be a bit more involved than `Good first issue` issues.

[good first issue]:https://github.com/lncapital/torq/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22
[help wanted]:https://github.com/lncapital/torq/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22

### Code style guides
We are aware we are currently violating some of the style guides but we are working our way through the codebase to address this.
#### snake_case:
* Database columns and tables

### camelCase:
* Folder names
* Sass style sheet ***.scss**
* TypeScript files ***.ts**
* JSON names
* JavaScript variables


### PascalCase:
* TypeScript files written using JSX syntax ***.tsx**

### UPPERCASE:
* MARKDOWN files

### golang specific:
* camelCase for unexported
* PascalCase for exported

### Development guides
#### All OS types
The required software is:
* git
* docker
* go
* node + npm

#### Windows extras

**git bash** installed with the unix tools is a usefull tool to run our end-to-end tests on Windows.

**Docker Desktop** is also compatible with torq. Please also activate WSL2 in Docker desktop.

### Running torq

Create a virtual **btcd**, **lnd** and **database** as development environment** for Alice, Carol and Bob: `go build ./virtual_network/torq_vn && go run ./virtual_network/torq_vn create --db true`

Once the command successfully finished the command to start torq will be visible and will look something like ` go build ./cmd/torq && ./torq --torq.password password --db.user postgres --db.port 5444 --db.password password start`.

Some files are generated by the script and are available in virtual_network/generated_files (`admin.macaroon` and `tls.cert`).

When torq started you will be able to login with password: `password` and update the Settings section to add Bob's node using `localhost:10009` and both of the generated files (`admin.macaroon` and `tls.cert`).

Once the virtual environment is created:

* to stop run: `go build ./virtual_network/torq_vn &&  go run ./virtual_network/torq_vn stop --db true`
* to start run: `go build ./virtual_network/torq_vn &&  go run ./virtual_network/torq_vn start --db true`
* to purge/delete run: `go build ./virtual_network/torq_vn &&  go run ./virtual_network/torq_vn purge --db true`

****Note for Windows** When the you run the end-to-end tests in windows and the created docker containers are not working please try running the following commands first: `dos2unix.exe virtual_network/docker/btcd/* ; dos2unix.exe virtual_network/docker/lnd/*`

### Testing torq

A partial test with npm is `cd web && npm test`

To run our full end-to-end tests similar to our github actions pipeline the command (in git bash on Windows*) is `make test && make test-e2e-debug`

***Note for Windows** When the you run the end-to-end tests in windows and the created docker containers are not working please try running the following commands first: `dos2unix.exe virtual_network/docker/btcd/* ; dos2unix.exe virtual_network/docker/lnd/*`
